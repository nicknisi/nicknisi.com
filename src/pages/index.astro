---
import metadata from '../data/metadata.json';
import BaseLayout from '../layouts/Base.astro';
import Posts from '@components/Posts.astro';
import Tag from '@components/Tag.astro';
import { getPosts } from '../util';
import { Icon } from 'astro-icon/components';

const allPosts = await getPosts();
const tags: string[] = [
  ...new Set(allPosts.map((post) => post.data.tags).flat()),
];
const posts = allPosts.slice(0, 10);
---

<BaseLayout>
  <div class="py-10">
    <div class="flex items-center flex-col">
      <div class="flex flex-col md:flex-row justify-center items-center">
        <div class="text-2xl sm:text-3xl lg:text-4xl font-bold">
          {metadata.description}
        </div>
        <div
          class="md:w-64 md:h-64 h-32 w-32 sm:mr-10 inline-flex items-center justify-center rounded-full text-blue-500 flex-shrink-0"
        >
          <img
            src={metadata.profile}
            alt="author"
            class="drop-shadow-md rounded-full w-32 h-32 md:w-64 md:h-64 shadow-lg object-cover mx-auto"
          />
        </div>
      </div>
      <div
        class="flex dark:text-grey-700 text-grey-200 md:justify-start justify-center items-center md:items-end w-full pt-2 md:pt-0"
      >
        {
          [
            'raphael:vim',
            'mdi:language-typescript',
            'mdi:react',
            'mdi:nodejs',
            'mdi:language-javascript',
          ].map((name) => <Icon name={name} class="w-8 h-8" />)
        }
      </div>
      <p class="mt-2 leading-8">
        A Front End Staff Engineer who specializes in JavaScript and web
        development. An expert in TypeScript and is dedicated to delivering the
        best developer experience. Frequent speaker at meetups and conferences,
        conference organizer and emcee, panelist on the <a
          href="https://jsparty.fm">JS Party podcast</a
        >, and an organizer of the <a href="https://nebraskajs.com"
          >NebraskaJS</a
        >
        meetup.
      </p>

      <h3 class="mt-8 text-2xl my-4">Latest posts</h3>
      <Posts posts={posts} />

      <h3 class="mt-8 text-2xl my-4">Tags</h3>
      <div
        class="flex flex-wrap items-center justify-start flex-initial space-x-2"
      >
        {tags.map((tag) => <Tag name={tag} />)}
      </div>
    </div>
  </div>
</BaseLayout>
